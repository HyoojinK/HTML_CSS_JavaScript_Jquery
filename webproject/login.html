<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Login</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"
      integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"
    />
    <link rel="stylesheet" href="./css/index.css" />
    <link rel="stylesheet" href="./css/rwd.css" />
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.min.js"
      integrity="sha512-jGsMH83oKe9asCpkOVkBnUrDDTp8wl+adkB2D+//JtlxO4SrLoJdhbOysIFQJloQFD+C4Fl1rMsQZF76JjV0eQ=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
  </head>

  <body>
    <div class="header"></div>
    <section id="login" class="row">
      <div class="loginbox">
        <form action="#" method="post">
          <fieldset>
            <legend>로그인폼</legend>
            <div>
              <p>
                <label for="userid">아이디</label>
                <input type="text" id="userid" />
              </p>
              <p>
                <label for="userpw">비밀번호</label>
                <input type="password" id="userpw" />
              </p>
            </div>
            <div class="btn">
              <button type="submit">로그인</button>
            </div>
          </fieldset>
        </form>
        <form action="#" method="post">
          <ul class="sns_login">
            <li>
              <a id="btn-kakao-login" href="kakao/login">카카오톡 로그인</a>
            </li>
            <!-- <li><a href="#none">네이버 로그인</a></li> -->
            <!-- <li><a href="#none">구글 계정 로그인</a></li> -->
          </ul>
        </form>
      </div>
    </section>
    <div class="footer"></div>

    <script src="./js/common.js"></script>
    <script src="https://developers.kakao.com/sdk/js/kakao.js"></script>
    <script>
      // 로그인 정보 저장
      $("form").on("submit", function (e) {
        e.preventDefault();
        let myid = $("#userid").val();
        let mypw = $("#userpw").val();
        if (myid && mypw) {
          sessionStorage.setItem("userid", myid); //sessionStorage는 문자만 저장할 수 있음!
          sessionStorage.setItem("userpw", mypw); //세션스토리지에 아이디랑 비밀번호 저장
          sessionStorage.setItem("type", "webprogramming_login_page");

          location.href = "./index.html";
        }
      });

      // 카카오 로그인
      $("#btn-kakao-login").on("click", function (e) {
        e.preventDefault();
        Kakao.init("98bb2e2bd1adba4b911f293825cf0f3b");
        Kakao.Auth.login({
          success: function (auth) {
            Kakao.API.request({
              url: "/v2/user/me",
              success: function (response) {
                var account = response.kakao_account;
                // console.log(account);
                sessionStorage.setItem("userid", account.email);
                sessionStorage.setItem("userpw", account.nickname);
                sessionStorage.setItem("type", "kakao");
                location.href = "./index.html";
              },
              fail: function (error) {
                console.log(error);
              },
            });
          },
          fail: function (error) {
            console.log(error);
          },
        });
      });
    </script>
  </body>
</html>
